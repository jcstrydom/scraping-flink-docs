[Skip to content](https://github.com/apache/flink-training/tree/master/ride-cleansing#start-of-content)

You signed in with another tab or window. [Reload](https://github.com/apache/flink-training/tree/master/ride-cleansing) to refresh your session.You signed out in another tab or window. [Reload](https://github.com/apache/flink-training/tree/master/ride-cleansing) to refresh your session.You switched accounts on another tab or window. [Reload](https://github.com/apache/flink-training/tree/master/ride-cleansing) to refresh your session.Dismiss alert

{{ message }}

[apache](https://github.com/apache)/ **[flink-training](https://github.com/apache/flink-training)** Public

- [Notifications](https://github.com/login?return_to=%2Fapache%2Fflink-training) You must be signed in to change notification settings
- [Fork\\
702](https://github.com/login?return_to=%2Fapache%2Fflink-training)
- [Star\\
1k](https://github.com/login?return_to=%2Fapache%2Fflink-training)


## Collapse file tree

## Files

master

Search this repository

/

# ride-cleansing

/

Copy path

## Directory actions

## More options

More options

## Directory actions

## More options

More options

## Latest commit

![tonny1983](https://avatars.githubusercontent.com/u/8895687?v=4&size=40)![victorunique](https://avatars.githubusercontent.com/u/3787990?v=4&size=40)![NicoK](https://avatars.githubusercontent.com/u/213026?v=4&size=40)
3 people

[\[](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146) [FLINK-26382](https://issues.apache.org/jira/browse/FLINK-26382) [\] Add Chinese documents for flink-training exercises (](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146) [#46](https://github.com/apache/flink-training/pull/46) [)](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146)

Open commit details

4 years agoApr 22, 2022

[aca6c47](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146) · 4 years agoApr 22, 2022

## History

[History](https://github.com/apache/flink-training/commits/master/ride-cleansing)

Open commit details

[View commit history for this file.](https://github.com/apache/flink-training/commits/master/ride-cleansing)

/

# ride-cleansing

/

Top

## Folders and files

| Name | Name | Last commit message | Last commit date |
| --- | --- | --- | --- |
| ### parent directory<br> [..](https://github.com/apache/flink-training/tree/master) |
| [src](https://github.com/apache/flink-training/tree/master/ride-cleansing/src "src") | [src](https://github.com/apache/flink-training/tree/master/ride-cleansing/src "src") | [\[](https://github.com/apache/flink-training/commit/108c8b35dc294c511dc5e57b500d4641d89752ee "[FLINK-27322][gradle] spotless apply (adding license headers)") [FLINK-27322](https://issues.apache.org/jira/browse/FLINK-27322) [\]\[gradle\] spotless apply (adding license headers)](https://github.com/apache/flink-training/commit/108c8b35dc294c511dc5e57b500d4641d89752ee "[FLINK-27322][gradle] spotless apply (adding license headers)") | 4 years agoApr 21, 2022 |
| [README.md](https://github.com/apache/flink-training/blob/master/ride-cleansing/README.md "README.md") | [README.md](https://github.com/apache/flink-training/blob/master/ride-cleansing/README.md "README.md") | [\[](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146 "[FLINK-26382] Add Chinese documents for flink-training exercises (#46)  Co-authored-by: Victor Xu <victor.unique@gmail.com> Co-authored-by: Nico Kruber <nico@ververica.com>") [FLINK-26382](https://issues.apache.org/jira/browse/FLINK-26382) [\] Add Chinese documents for flink-training exercises (](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146 "[FLINK-26382] Add Chinese documents for flink-training exercises (#46)  Co-authored-by: Victor Xu <victor.unique@gmail.com> Co-authored-by: Nico Kruber <nico@ververica.com>") [#46](https://github.com/apache/flink-training/pull/46) [)](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146 "[FLINK-26382] Add Chinese documents for flink-training exercises (#46)  Co-authored-by: Victor Xu <victor.unique@gmail.com> Co-authored-by: Nico Kruber <nico@ververica.com>") | 4 years agoApr 22, 2022 |
| [README\_zh.md](https://github.com/apache/flink-training/blob/master/ride-cleansing/README_zh.md "README_zh.md") | [README\_zh.md](https://github.com/apache/flink-training/blob/master/ride-cleansing/README_zh.md "README_zh.md") | [\[](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146 "[FLINK-26382] Add Chinese documents for flink-training exercises (#46)  Co-authored-by: Victor Xu <victor.unique@gmail.com> Co-authored-by: Nico Kruber <nico@ververica.com>") [FLINK-26382](https://issues.apache.org/jira/browse/FLINK-26382) [\] Add Chinese documents for flink-training exercises (](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146 "[FLINK-26382] Add Chinese documents for flink-training exercises (#46)  Co-authored-by: Victor Xu <victor.unique@gmail.com> Co-authored-by: Nico Kruber <nico@ververica.com>") [#46](https://github.com/apache/flink-training/pull/46) [)](https://github.com/apache/flink-training/commit/aca6c47b79d486eb38969492c7e2dc8cb200d146 "[FLINK-26382] Add Chinese documents for flink-training exercises (#46)  Co-authored-by: Victor Xu <victor.unique@gmail.com> Co-authored-by: Nico Kruber <nico@ververica.com>") | 4 years agoApr 22, 2022 |
| [build.gradle](https://github.com/apache/flink-training/blob/master/ride-cleansing/build.gradle "build.gradle") | [build.gradle](https://github.com/apache/flink-training/blob/master/ride-cleansing/build.gradle "build.gradle") | [\[](https://github.com/apache/flink-training/commit/108c8b35dc294c511dc5e57b500d4641d89752ee "[FLINK-27322][gradle] spotless apply (adding license headers)") [FLINK-27322](https://issues.apache.org/jira/browse/FLINK-27322) [\]\[gradle\] spotless apply (adding license headers)](https://github.com/apache/flink-training/commit/108c8b35dc294c511dc5e57b500d4641d89752ee "[FLINK-27322][gradle] spotless apply (adding license headers)") | 4 years agoApr 21, 2022 |
| View all files |

## [README.md](https://github.com/apache/flink-training/tree/master/ride-cleansing\#readme)

Outline

[中文版](https://github.com/apache/flink-training/blob/master/ride-cleansing/README_zh.md)

# Lab: Filtering a Stream (Ride Cleansing)

[Permalink: Lab: Filtering a Stream (Ride Cleansing)](https://github.com/apache/flink-training/tree/master/ride-cleansing#lab-filtering-a-stream-ride-cleansing)

If you haven't already done so, you'll need to first [setup your Flink development environment](https://github.com/apache/flink-training/blob/master/README.md). See [How to do the Labs](https://github.com/apache/flink-training/blob/master/README.md#how-to-do-the-labs) for an overall introduction to these exercises.

The task of the "Taxi Ride Cleansing" exercise is to cleanse a stream of TaxiRide events by removing events that start or end outside of New York City.

The `GeoUtils` utility class provides a static method `isInNYC(float lon, float lat)` to check if a location is within the NYC area.

### Input Data

[Permalink: Input Data](https://github.com/apache/flink-training/tree/master/ride-cleansing#input-data)

This exercise is based on a stream of `TaxiRide` events, as described in [Using the Taxi Data Streams](https://github.com/apache/flink-training/blob/master/README.md#using-the-taxi-data-streams).

### Expected Output

[Permalink: Expected Output](https://github.com/apache/flink-training/tree/master/ride-cleansing#expected-output)

The result of the exercise should be a `DataStream<TaxiRide>` that only contains events of taxi rides which both start and end in the New York City area as defined by `GeoUtils.isInNYC()`.

The resulting stream should be printed to standard out.

## Getting Started

[Permalink: Getting Started](https://github.com/apache/flink-training/tree/master/ride-cleansing#getting-started)

> ℹ️ Rather than following the links to the sources in this section, you'll do better to find these classes in the flink-training project in your IDE.
> Both IntelliJ and Eclipse have ways to make it easy to search for and navigate to classes and files. For IntelliJ, see [the help on searching](https://www.jetbrains.com/help/idea/searching-everywhere.html), or simply press the Shift key twice and then continue typing something like `RideCleansing` and then select from the choices that popup.

### Exercise Classes

[Permalink: Exercise Classes](https://github.com/apache/flink-training/tree/master/ride-cleansing#exercise-classes)

This exercise uses these classes:

- Java: [`org.apache.flink.training.exercises.ridecleansing.RideCleansingExercise`](https://github.com/apache/flink-training/blob/master/ride-cleansing/src/main/java/org/apache/flink/training/exercises/ridecleansing/RideCleansingExercise.java)
- Scala: [`org.apache.flink.training.exercises.ridecleansing.scala.RideCleansingExercise`](https://github.com/apache/flink-training/blob/master/ride-cleansing/src/main/scala/org/apache/flink/training/exercises/ridecleansing/scala/RideCleansingExercise.scala)

### Tests

[Permalink: Tests](https://github.com/apache/flink-training/tree/master/ride-cleansing#tests)

You will find the tests for this exercise in

- Java: [`org.apache.flink.training.exercises.ridecleansing.RideCleansingIntegrationTest`](https://github.com/apache/flink-training/blob/master/ride-cleansing/src/test/java/org/apache/flink/training/exercises/ridecleansing/RideCleansingIntegrationTest.java)
- Java: [`org.apache.flink.training.exercises.ridecleansing.RideCleansingUnitTest`](https://github.com/apache/flink-training/blob/master/ride-cleansing/src/test/java/org/apache/flink/training/exercises/ridecleansing/RideCleansingUnitTest.java)
- Scala: [`org.apache.flink.training.exercises.ridecleansing.scala.RideCleansingIntegrationTest`](https://github.com/apache/flink-training/blob/master/ride-cleansing/src/test/scala/org/apache/flink/training/exercises/ridecleansing/scala/RideCleansingIntegrationTest.scala)
- Scala: [`org.apache.flink.training.exercises.ridecleansing.scala.RideCleansingUnitTest`](https://github.com/apache/flink-training/blob/master/ride-cleansing/src/test/scala/org/apache/flink/training/exercises/ridecleansing/scala/RideCleansingUnitTest.scala)

Like most of these exercises, at some point the `RideCleansingExercise` class throws an exception

```
throw new MissingSolutionException();
```

Once you remove this line, the test will fail until you provide a working solution. You might want to first try something clearly broken, such as

```
return false;
```

in order to verify that the test does indeed fail when you make a mistake, and then work on implementing a proper solution.

## Implementation Hints

[Permalink: Implementation Hints](https://github.com/apache/flink-training/tree/master/ride-cleansing#implementation-hints)

**Filtering Events**

Flink's DataStream API features a `DataStream.filter(FilterFunction)` transformation to filter events from a data stream. The `GeoUtils.isInNYC()` function can be called within a `FilterFunction` to check if a location is in the New York City area. Your filter function should check both the starting and ending locations of each ride.

## Documentation

[Permalink: Documentation](https://github.com/apache/flink-training/tree/master/ride-cleansing#documentation)

- [DataStream API](https://nightlies.apache.org/flink/flink-docs-stable/docs/dev/datastream/overview)
- [Flink JavaDocs](https://nightlies.apache.org/flink/flink-docs-stable/api/java)

## Reference Solutions

[Permalink: Reference Solutions](https://github.com/apache/flink-training/tree/master/ride-cleansing#reference-solutions)

Reference solutions are available in this project:

- Java: [`org.apache.flink.training.solutions.ridecleansing.RideCleansingSolution`](https://github.com/apache/flink-training/blob/master/ride-cleansing/src/solution/java/org/apache/flink/training/solutions/ridecleansing/RideCleansingSolution.java)
- Scala: [`org.apache.flink.training.solutions.ridecleansing.scala.RideCleansingSolution`](https://github.com/apache/flink-training/blob/master/ride-cleansing/src/solution/scala/org/apache/flink/training/solutions/ridecleansing/scala/RideCleansingSolution.scala)

* * *

[**Back to Labs Overview**](https://github.com/apache/flink-training/blob/master/README.md#lab-exercises)

You can’t perform that action at this time.